using System;
using System.Threading.Tasks.Dataflow;

namespace Repeat_After_Me
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Clear();
            Console.SetCursorPosition(13, 13);
            Console.WriteLine("Your objective is to repeat after me. If I say something, you say it back.");
            Console.ReadLine();
            Console.Clear();
            Console.SetCursorPosition(9, 9);
            Console.WriteLine("You have a limited amount of time to repeat after each phrase is presented to you.");
            Console.ReadLine();
            Console.Clear();
            Console.SetCursorPosition(13, 13);
            Console.WriteLine("And if you run out of time...");
            Console.ReadLine();
            Console.SetCursorPosition(13, 13);
        Start:
            Console.Clear();
            Console.SetCursorPosition(13, 13);
            Console.WriteLine("You lose.");
            Console.ReadLine();
            Console.WriteLine("Press 'R' when you're ready.");
            var userInput = Convert.ToString(Console.ReadLine());
            if (userInput == "R")
            {
                Console.Clear();
                Console.SetCursorPosition(15, 15);
                Console.WriteLine("Ok, let's continue.");
                userInput = null;
            }
            else
            {
                Console.WriteLine("Please press 'R'");
                userInput = null;
                goto Start;
            }


            object[] collection1 = { "a", "b", "repeat", "supper", "conjunction" };

            int badFlag = 0;
            foreach (var item in collection1)
            {
                Console.SetCursorPosition(1, 13);
                Console.WriteLine("Say: " + item);
                var userInput1 = Console.ReadLine();
                if (userInput1 == Convert.ToString(item))
                {
                    Console.WriteLine("Congratulations, you typed in " + item);
                    
                    Console.Clear();

                }
                else
                {
                    Console.WriteLine("You didn't type in: " + item);
                    badFlag++;
                    Console.WriteLine("Strike " + badFlag);
                    if (badFlag == 3) //lose condition
                    {
                        Console.WriteLine("Sorry, three strikes and you're out! Back to the shadow realm with you!");
                        System.Threading.Thread.Sleep(3000);
                        goto Start;
                    }
                }
            }
            Console.Clear();
            Console.SetCursorPosition(13, 13);
            Console.WriteLine("Congratulations! You got past level 1!");
            Console.SetCursorPosition(13, 14);
            switch (badFlag)
            {
                case 1:
                    Console.WriteLine("You failed " + badFlag + " Time!");
                    break;
                default:
                    Console.WriteLine("You failed " + badFlag + " Times!");
                    break;

            }
            badFlag = 0;
            System.Threading.Thread.Sleep(1000);
            int Level = 0;



            Console.Read();


        }
    }
}
